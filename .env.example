# Inference Gateway Configuration
# Copy this file to .env and adjust values for your environment

# ============================================================================
# Gateway Server Configuration
# ============================================================================
# Host and port for the gateway to listen on
GATEWAY_HOST=127.0.0.1
GATEWAY_PORT=8090

# ============================================================================
# Upstream Backend URLs
# ============================================================================
# Base URL for text-only inference requests
# Example: http://127.0.0.1:11434 (Ollama) or http://127.0.0.1:8080
TEXT_BASE_URL=http://127.0.0.1:11434

# Base URL for audio-enabled inference requests
# Example: http://127.0.0.1:8080
AUDIO_BASE_URL=http://127.0.0.1:8080

# Default upstream URL (optional; if empty, uses TEXT_BASE_URL)
# Used when ROUTING_MODE=single
DEFAULT_BASE_URL=

# ============================================================================
# Routing Configuration
# ============================================================================
# Routing mode: 'single' or 'audio_text'
# - single: all requests go to DEFAULT_BASE_URL (or TEXT_BASE_URL)
# - audio_text: requests with audio go to AUDIO_BASE_URL; others to TEXT_BASE_URL
ROUTING_MODE=single

# ============================================================================
# Timeout Configuration
# ============================================================================
# Total timeout for upstream requests (seconds)
UPSTREAM_TIMEOUT_S=300

# Connection timeout for upstream requests (seconds)
UPSTREAM_CONNECT_TIMEOUT_S=10

# ============================================================================
# Security Configuration
# ============================================================================
# API key for gateway authentication (optional)
# If set, requires Authorization: Bearer <API_KEY> header on all endpoints except /health
API_KEY=

# CORS allowed origins (comma-separated list, empty = no CORS)
# Example: http://localhost:3000,https://example.com
ALLOW_ORIGINS=

# ============================================================================
# Audio Preprocessing Configuration
# ============================================================================
# Path to ffmpeg binary (default: 'ffmpeg' - must be in PATH)
FFMPEG_BIN=ffmpeg

# Enable audio preprocessing (1 = enabled, 0 = disabled)
AUDIO_PREPROCESS_ENABLED=1

# Target sample rate for audio normalization (Hz)
AUDIO_TARGET_SR=16000

# Target number of audio channels (1 = mono, 2 = stereo)
AUDIO_TARGET_CHANNELS=1

# Enable loudness normalization (1 = enabled, 0 = disabled)
AUDIO_LOUDNORM=1

# Loudness normalization filter parameters (EBU R128)
# Format: loudnorm=I=-16:TP=-1.5:LRA=11
AUDIO_LOUDNORM_FILTER=loudnorm=I=-16:TP=-1.5:LRA=11

# ============================================================================
# Convenience Endpoint Prompts
# ============================================================================
# System prompt for /v1/transcribe endpoint
TRANSCRIBE_SYSTEM_PROMPT=You are a helpful assistant that transcribes audio accurately.

# Optional prefix for /v1/analyze endpoint system prompt
# The instruction from the request will be appended to this
ANALYZE_SYSTEM_PROMPT_PREFIX=

# ============================================================================
# Logging Configuration
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log request bodies (1 = enabled, 0 = disabled)
# WARNING: Only enable in development; may log sensitive data
LOG_REQUEST_BODIES=0
